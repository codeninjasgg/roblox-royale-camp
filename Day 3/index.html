
<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Roblox Royale | Day 3</title>
  <link rel="icon" href="https://github.com/codeninjasgg/roblox-royale-camp/blob/master/static/favicon.svg?raw=true"/>
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/github-markdown-css/4.0.0/github-markdown.min.css">
  <link href="https://unpkg.com/tailwindcss@^1.0/dist/tailwind.min.css" rel="stylesheet">
  <style>body {
  color: #111;
  background-color: #eee;
}
/*# sourceMappingURL=index.css.map */</style>
</head>
<body>
  <div class="h-screen">
    <div class="h-screen flex overflow-hidden bg-white dark:bg-light-black-900">
      <!-- Start Popup Sidebar -->
      <div id="sidebar" class="hidden md:hidden enter-done">
        <div class="fixed inset-0 flex z-40">
          <div class="fixed inset-0 appear-done enter-done">
            <div class="absolute inset-0 bg-gray-600 opacity-75"></div>
          </div>
          
<div class="relative flex-1 flex flex-col max-w-xs w-full bg-white dark:bg-light-black-950 appear-done enter-done">
  <div class="absolute top-0 right-0 -mr-14 p-1">
        <button onclick="(() => {
  const sidebar = document.querySelector('#sidebar');
  sidebar.classList.add('hidden');
})()" role="button" class="flex items-center justify-center h-12 w-12 rounded-full focus:outline-none focus:bg-gray-600" aria-label="Close sidebar">
          <svg class="h-6 w-6 text-gray-600 dark:text-gray-400" stroke="currentColor" fill="none" viewBox="0 0 24 24">
            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M6 18L18 6M6 6l12 12"></path>
          </svg>
        </button>
      </div>
  
<div class="bg-gray-100 dark:bg-black pb-4 pt-4 border-b border-gray-200 dark:border-light-black-800">
  <a class="flex items-center flex-shrink-0 px-4" href="/roblox-royale-camp">
    <img src="https://github.com/codeninjasgg/roblox-royale-camp/blob/master/static/favicon.svg?raw=true" alt="logo" class="w-auto h-12">
    <div class="mx-4 flex flex-col justify-center">
      <div class="font-bold text-gray-900 dark:text-gray-200 leading-6 text-2xl tracking-tight">
        Roblox Royale
      </div>
    </div>
  </a>
  <header class="px-4 pt-3 sm:px-6 sm:pt-4">
    <div class="mt-1 text-sm text-gray-600 dark:text-gray-400">
      Last published 8/7/2020,<br> 12:03:07 PM PST.
    </div>
  </header>
</div>

  <div class="pt-2 pb-8 h-0 flex-1 flex flex-col overflow-y-auto">
    <nav class="flex-1 px-4">
      <div class="mt-2 mb-4">
        
<ul class="list-disc">

        <li class="ml-3">
            <a class="underline hover:text-blue-500" href="https://codeninjasgg.github.io/roblox-royale-camp/Day%201">Day 1</a>
        </li>
        
        <li class="ml-3">
            <a class="underline hover:text-blue-500" href="https://codeninjasgg.github.io/roblox-royale-camp/Day%202">Day 2</a>
        </li>
        
        <li class="ml-3">
            <a class="underline hover:text-blue-500" href="https://codeninjasgg.github.io/roblox-royale-camp/Day%203">Day 3</a>
        </li>
        
        <li class="ml-3">
            <a class="underline hover:text-blue-500" href="https://codeninjasgg.github.io/roblox-royale-camp/Day%204">Day 4</a>
        </li>
        
        <li class="ml-3">
            <a class="underline hover:text-blue-500" href="https://codeninjasgg.github.io/roblox-royale-camp/Day%205">Day 5</a>
        </li>
        
        <li class="ml-3">
            <a class="underline hover:text-blue-500" href="https://codeninjasgg.github.io/roblox-royale-camp/Hall%20of%20Fame">Hall of Fame</a>
        </li>
        
</ul>

      </div>
    </nav>
  </div>
</div>

          <div class="flex-shrink-0 w-14"></div>
        </div>
      </div>
      <!-- End Popup Sidebar -->
      <div class="hidden md:flex md:flex-shrink-0">
        
<div class="relative flex-1 flex flex-col max-w-xs w-full bg-white dark:bg-light-black-950 appear-done enter-done">
  
  
<div class="bg-gray-100 dark:bg-black pb-4 pt-4 border-b border-gray-200 dark:border-light-black-800">
  <a class="flex items-center flex-shrink-0 px-4" href="/roblox-royale-camp">
    <img src="https://github.com/codeninjasgg/roblox-royale-camp/blob/master/static/favicon.svg?raw=true" alt="logo" class="w-auto h-12">
    <div class="mx-4 flex flex-col justify-center">
      <div class="font-bold text-gray-900 dark:text-gray-200 leading-6 text-2xl tracking-tight">
        Roblox Royale
      </div>
    </div>
  </a>
  <header class="px-4 pt-3 sm:px-6 sm:pt-4">
    <div class="mt-1 text-sm text-gray-600 dark:text-gray-400">
      Last published 8/7/2020,<br> 12:03:07 PM PST.
    </div>
  </header>
</div>

  <div class="pt-2 pb-8 h-0 flex-1 flex flex-col overflow-y-auto">
    <nav class="flex-1 px-4">
      <div class="mt-2 mb-4">
        
<ul class="list-disc">

        <li class="ml-3">
            <a class="underline hover:text-blue-500" href="https://codeninjasgg.github.io/roblox-royale-camp/Day%201">Day 1</a>
        </li>
        
        <li class="ml-3">
            <a class="underline hover:text-blue-500" href="https://codeninjasgg.github.io/roblox-royale-camp/Day%202">Day 2</a>
        </li>
        
        <li class="ml-3">
            <a class="underline hover:text-blue-500" href="https://codeninjasgg.github.io/roblox-royale-camp/Day%203">Day 3</a>
        </li>
        
        <li class="ml-3">
            <a class="underline hover:text-blue-500" href="https://codeninjasgg.github.io/roblox-royale-camp/Day%204">Day 4</a>
        </li>
        
        <li class="ml-3">
            <a class="underline hover:text-blue-500" href="https://codeninjasgg.github.io/roblox-royale-camp/Day%205">Day 5</a>
        </li>
        
        <li class="ml-3">
            <a class="underline hover:text-blue-500" href="https://codeninjasgg.github.io/roblox-royale-camp/Hall%20of%20Fame">Hall of Fame</a>
        </li>
        
</ul>

      </div>
    </nav>
  </div>
</div>

      </div>
      <div class="flex flex-col w-0 flex-1 overflow-hidden">
        <div class="relative z-10 flex-shrink-0 flex h-16 bg-white dark:bg-black shadow md:hidden border-b border-gray-200 dark:border-light-black-800">
          <a class="px-4 flex items-center justify-center md:hidden" href="/roblox-royale-camp">
            <img src="https://github.com/codeninjasgg/roblox-royale-camp/blob/master/static/favicon.svg?raw=true" alt="logo" class="w-auto h-10">
          </a>
          <div class="flex-1 px-4 flex justify-between">
            <div class="flex-1 flex"></div>
          </div>
          <button onclick="(() => {
  const sidebar = document.querySelector('#sidebar');
  sidebar.classList.remove('hidden');
})()" class="px-4 text-gray-500 dark:text-gray-200 focus:outline-none focus:bg-gray-100 dark:focus:bg-light-black-950 focus:text-gray-600 dark:focus:text-gray-400 md:hidden" aria-label="Open sidebar">
            <svg class="h-6 w-6" stroke="currentColor" fill="none" viewBox="0 0 24 24">
              <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4 6h16M4 12h16M4 18h7"></path>
            </svg>
          </button>
        </div>
        <main class="flex-1 relative z-0 overflow-y-auto focus:outline-none" tabindex="0">
          <div class="max-w-screen-lg px-4 sm:px-6 md:px-8 pb-12">
            <div class="py-6">
              <a href="https://github.com/codeninjasgg/roblox-royale-camp/edit/master/pages/Day 3.md">
                üìù github.com/codeninjasgg/roblox-royale-camp/edit/master/pages/Day 3.md
              </a>
              <div>
                <div class="markdown-body"><h1 id="day-3">Day 3</h1>
<h2 id="overview-üëÄ">Overview üëÄ</h2>
<p>Today we will utilize <em>BindableEvents</em> and script out the logic for our game&#39;s timer.</p>
<h2 id="follow-along-üëç">Follow Along! üëç</h2>
<p>First, we will download today&#39;s file <a href="https://education.roblox.com/assets/bltf337a667bbe03989/battleroyale_lesson3_final.rbxl?disposition=inline">here</a>. Once downloaded, let&#39;s open it up in Roblox studio and begin our quest for today.</p>
<h3 id="fun-quiz-üß†">Fun Quiz üß†</h3>
<blockquote>
<p>Here are some quiz questions that we will be able to answer as we complete today&#39;s instructions.</p>
</blockquote>
<details>
  <summary>What does 'WaitForChild' do?</summary>
  The 'WaitForChild' method is used by variables that represent folders in our explorer. This method allows us to reach into the folder that it's instance represents and pick a file programmatically.
</details>

<details>
  <summary>What does 'Connect' do?</summary>
    The 'Connect' method takes a function as its argument and calls it once the event is resolved (completed).
</details>

<details>
  <summary>What does 'Wait' do?</summary>
    The 'Wait' method stops the script from continuing until the event has been resolved (completed).
</details>

<hr>
<p>Then we will work on programming by following <a href="https://education.roblox.com/en-us/resources/battle-royale/timers-and-custom-events">these</a> instructions.</p>
<p>When we are done, our scripts should resemble the following samples:</p>
<h3 id="serverscriptservice--gamemanager"><code>ServerScriptService &gt; GameManager</code></h3>
<pre><code class="language-lua">-- Services
local ServerStorage = game:GetService(&quot;ServerStorage&quot;)
local Players = game:GetService(&quot;Players&quot;)

-- Module Scripts
local moduleScripts = ServerStorage:WaitForChild(&quot;ModuleScripts&quot;)
local matchManager = require(moduleScripts:WaitForChild(&quot;MatchManager&quot;))
local gameSettings = require(moduleScripts:WaitForChild(&quot;GameSettings&quot;))

-- Events
local events = ServerStorage:WaitForChild(&quot;Events&quot;)
local matchEnd = events:WaitForChild(&quot;MatchEnd&quot;)

while true do
    repeat
        wait(gameSettings.intermissionDuration)
        print(&quot;Restarting intermission&quot;)
    until Players.NumPlayers &gt;= gameSettings.minimumPlayers

    print(&quot;Intermission over&quot;)
    wait(gameSettings.transitionTime)

    matchManager.prepareGame()
    -- Placeholder wait for the length of the game.
    matchEnd.Event:Wait()

end</code></pre>
<h3 id="serverstorage--modulescripts--matchmanager"><code>ServerStorage &gt; ModuleScripts &gt; MatchManager</code></h3>
<pre><code class="language-lua">local MatchManager = {}

-- Services
local ServerStorage = game:GetService(&quot;ServerStorage&quot;)

-- Module Scripts
local moduleScripts = ServerStorage:WaitForChild(&quot;ModuleScripts&quot;)
local playerManager = require(moduleScripts:WaitForChild(&quot;PlayerManager&quot;))
local gameSettings = require(moduleScripts:WaitForChild(&quot;GameSettings&quot;))
local timer = require(moduleScripts:WaitForChild(&quot;Timer&quot;))

-- Events
local events = ServerStorage:WaitForChild(&quot;Events&quot;)
local matchStart = events:WaitForChild(&quot;MatchStart&quot;)
local matchEnd = events:WaitForChild(&quot;MatchEnd&quot;)

-- Creates a new timer object to be used to keep track of match time. 
local myTimer = timer.new()

-- Local Functions
local function timeUp()
    print(&quot;Time is up!&quot;)
end

local function startTimer()
    print(&quot;Timer started&quot;)
    myTimer:start(gameSettings.matchDuration)
    myTimer.finished:Connect(timeUp)    
end

-- Module Functions
function MatchManager.prepareGame()
    playerManager.sendPlayersToMatch()
    matchStart:Fire()
end

matchStart.Event:Connect(startTimer)

return MatchManager</code></pre>
<h3 id="serverstorage--modulescripts--timer"><code>ServerStorage &gt; ModuleScripts &gt; Timer</code></h3>
<pre><code class="language-lua">local Timer = {}
Timer.__index = Timer

function Timer.new()
    local self = setmetatable({}, Timer)

    self._finishedEvent = Instance.new(&quot;BindableEvent&quot;)
    self.finished = self._finishedEvent.Event

    self._running = false
    self._startTime = nil
    self._duration = nil

    return self
end

function Timer:start(duration)
    if not self._running then
        local timerThread = coroutine.wrap(function()
            self._running = true
            self._duration = duration
            self._startTime = tick()
            while self._running and tick() - self._startTime &lt; duration do
                wait()
            end
            local completed = self._running
            self._running = false
            self._startTime = nil
            self._duration = nil
            self._finishedEvent:Fire(completed)
        end)
        timerThread()
    else
        warn(&quot;Warning: timer could not start again as it is already running.&quot;)
    end
end

function Timer:getTimeLeft()
    if self._running then
        local now = tick()
        local timeLeft = self._startTime + self._duration - now
        if timeLeft &lt; 0 then
            timeLeft = 0
        end
        return timeLeft
    else
        warn(&quot;Warning: could not get remaining time, timer is not running.&quot;)
    end
end

function Timer:isRunning()
    return self._running
end

function Timer:stop()
    self._running = false
end

return Timer</code></pre>
<hr>
<p>A complete example project of the scripting we have done in class today can be found <a href="https://education.roblox.com/assets/blt03dc7fe967c0c5f3/battleroyale_lesson4_final.rbxl?disposition=inline">here</a>.</p>
<h2 id="optional-homework-üìÑ">Optional Homework üìÑ</h2>
<blockquote>
<p>Read the following articles to acheive a full understanding of what we are working on for day 4.</p>
</blockquote>
<ul>
<li><a href="https://education.roblox.com/en-us/resources/battle-royale/displaying-information-with-gui">Creating a GUI (Graphical User Interface)</a></li>
</ul>
<hr>
<p>See you tomorrow for day 4!</p>
</div>
              </div>
            </div>
          </div>
        </main>
      </div>
    </div>
  </div>
</body>
</html>
